---
import Layout from "@/layouts/BaseLayout.astro";
import ContactCTA from "@/components/ContactCTA.astro";

import { Icon } from "astro-icon/components";
import {
  Card,
  CardContent,
  CardHeader,
  CardTitle,
} from "@/components/starwind/card";
import { Badge } from "@/components/starwind/badge";
import { Button } from "@/components/starwind/button";

// Get resume data from content collection
/* const resumeEntry = await getEntry("resume", "index");
if (!resumeEntry) {
  throw new Error("Resume data not found");
}
 */

const resumeEntry = {
  contactInfo: {
    name: "Jasper Yong",
    title: "Full-Stack Web Developer",
    email: "jasper.yzh@gmail.com",
    website: "jasperyong.com",
    github: "https://github.com/jasperyzh/",
    linkedin: "https://www.linkedin.com/in/jaspery/",
    location: "Kuala Lumpur, Malaysia",
  },
  summary:
    "Dedicated Full-Stack Web Developer with 9+ years of experience spanning front-end, back-end, and full-stack development. Proven track record in leading teams, significantly boosting SEO performance, and effectively managing complex projects and concept to launch. Passionate about leveraging modern technologies to build engaging, user-centric web solutions and continuously exploring the intersection of technology, creativity, and effective knowledge systems.",
  professionalExperience: [
    {
      role: "Full-Stack Web Developer",
      company: "Fishermen Analytics",
      period: "Aug 2015 - May 2024",
      description:
        "Partnered with startups and SMEs to architect, develop, and maintain scalable web applications and websites utilizing modern full-stack technologies.",
      highlights: [
        "<strong>Website Design & Development</strong> – Developed and optimized responsive, user-centric websites and applications with HTML, CSS, JavaScript, and WordPress, enhancing performance and reliability.",
        "<strong>SEO & Analytics</strong> – Spearheaded SEO initiatives, increasing average site scores from 50 to 80+% and significantly boosting organic search visibility. Analyzed user data to inform design and content strategies that improved engagement.",
        "<strong>Team Leadership</strong> – Led a small cross-functional team of developers and designers, overseeing project delivery for diverse web solutions from ideation to deployment. Introduced organizational tools and pratices that enhanced team communication and efficiency.",
        "<strong>Project management</strong> – Managed the full lifecycle of web development projects for key clients including Yayasan Petronas, Petrosains, Methodist College Kuala Lumpur, ensuring timely and on-budget delivery.",
        "<strong>UI/UX improvements</strong> – Collaborated closely with design teams to implement UI/UX enhancements, improving user retention and engagement. Streamlined navigation and standardized SEO practices across client platforms.",
        "<strong>Multimedia Proficiency</strong> – Apply versatile skills beyond web development,  assisting with multimedia tasks (design, video editing) to support project goals and providing technical mentorship to colleagues navigating new technologies.",
      ],
    },
  ],

  keyProjects: [
    {
      name: "YayasanPetronas.com.my - CSR Platform",
      description:
        "Developed and launched a CSR-focused website, enhancing the visibility of social initiatives and increasing donor engagement.",
      highlights: [
        "Leveraged intuitive UX design to ensure seamless navigation and engagement",
        "Successfully drove awareness of the organization's activities",
        "Culminated in a high-profile launch event led by Dr. Wan Azizah",
      ],
    },
    {
      name: "Petrosains.com.my - Nation's STEM Advocacy",
      description:
        "Redesigned and revamped the Petrosains website to better support STEM advocacy in Malaysia.",
      highlights: [
        "Created an overhauled and refreshed interface catering to diverse user groups from students to educators",
        "Significantly enhanced visibility and accessibility of STEM resources",
        "Increased community outreach and education content distribution",
      ],
    },
    {
      name: "ParamountProperty.my",
      description:
        "Managed and expanded the Paramount Property website portfolio, growing the number of projects from 10 to 15 over 7 years.",
      highlights: [
        "Collaborated with the in-house IT team to ensure continuous service improvement and uptime",
        "Contributed to increased user satisfaction and efficiency",
        "Supported sustained business growth through digital presence optimization",
      ],
    },
    {
      name: "BersatuForMakan - Fishermen x BFM Campaign",
      description:
        "Led the technical execution for a collaborative campaign (Fishermen x BFM 89.9), designing and developing a dedicated microsite from concept to launch.",
      highlights: [
        "Achieved exceptional results on a modest RM2000 budget, reached nearly 3 million people and generated RM700k in earned media value.",
        "Drove a 628% increase in engagement and sixfold follower growth, delivered significant PR impact and visibility for the partner organization.",
      ],
    },
  ],

  professionalPhilosophy:
    "Driven by a passion for continuous learning and building impactful, user-centric solutions at the intersection of technology and creative problem-solving.",

  technicalExpertise: {
    languages: ["HTML", "CSS", "JavaScript", "TypeScript", "PHP"],
    frontendTechnologies: [
      "AstroJS",
      "TailwindCSS",
      "WordPress",
      "p5.js",
      "BootstrapCSS",
      "Vue.js",
      "React",
      "Phaser3",
    ],
    backendTechnologies: [
      "Git / GitHub",
      "Node.js / NPM",
      "MySQL",
      "CI/CD",
      "Vercel",
      "Docker",
      "Express",
      "PostgreSQL",
    ],
    tools: [
      "Linux",
      "Obsidian.md",
      "Bash",
      "VS Code",
      "Cursor",
      "Google Workspace",
      "Postman",
      "Windsurf",
    ],
    designSoftware: [
      "Figma",
      "Adobe Photoshop / Illustrator",
      "GIMP / Inkscape",
      "Canva",
    ],
  },

  additionalCompetencies: [
    "Advanced problem-solving and analytical thinking",
    "Project planning and documentation methodology implementation",
    "UI/UX design principles and best practices",
    "Performance optimization techniques",
    "Secure coding practices and implementation",
    "Cross-browser compatibility and responsive design",
  ],

  education: [
    {
      degree: "BA (Hons) in Computer Games Design",
      institution: "University of Teesside, UK",
      year: "2010 - 2012",
      highlights: ["Focus on Computer Games Design", "Documentation & Design"],
    },
    {
      degree: "Diploma in Multimedia Design",
      institution: "The One Academy, Malaysia",
      year: "2006 - 2008",
      highlights: [
        "Art & Design Fundamentals",
        "Multimedia Design Fundamentals",
        "3D Animation Fundamentals",
        "Web Design Fundamentals",
      ],
    },
  ],

  languages: [
    { language: "English", proficiency: "90" },
    { language: "Mandarin", proficiency: "80" },
    { language: "Bahasa Malaysia", proficiency: "60" },
  ],

  interests: [
    "Exploring Generative Art and Creative Coding",
    "Reading Philosophy, Economics, and History",
    "Building Personal Knowledge Management Systems",
    "Exploring emerging technologies in web development",
  ],
};

const {
  contactInfo,
  summary,
  professionalExperience,
  keyProjects,
  professionalPhilosophy,
  technicalExpertise,
  additionalCompetencies,
  education,
  languages,
  interests,
} = resumeEntry;
---

<Layout title="Resume - Jasper Yong">
  <div
    class="container container--grid resume__container mx-auto my-8 px-4 max-w-7xl"
  >
    <!-- Hero Section with Contact Info -->
    <header
      class="bg-gradient-to-br from-slate-700 to-slate-800 text-white p-8 rounded-lg shadow-lg mb-10"
    >
      <div
        class="flex flex-col md:flex-row justify-between items-start md:items-center gap-6"
      >
        <div>
          <h1 class="text-3xl md:text-4xl font-bold mb-2">
            {contactInfo.name}
          </h1>
          <a
            href={`https://${contactInfo.website}`}
            class="text-blue-300 hover:text-blue-200 transition-colors duration-300 mb-4 inline-block"
            >{contactInfo.website}</a
          >

          <Button variant="ghost" size="icon">
            <Icon name="bi:github" />
          </Button>
        </div>

        <div class="flex flex-col justify-start gap-1">
          <Button
            variant="ghost"
            size="sm"
            href={`mailto:${contactInfo.email}`}
          >
            <Icon name="bi:envelope" />
            {contactInfo.email}
          </Button>

          <Button
            variant="ghost"
            size="sm"
            href={`https://${contactInfo.github}`}
          >
            <Icon name="bi:github" />
            {contactInfo.github}
          </Button>

          <Button
            variant="ghost"
            size="sm"
            href={`https://${contactInfo.linkedin}`}
          >
            <Icon name="bi:linkedin" />
            {contactInfo.linkedin}
          </Button>

          <Button
            variant="ghost"
            size="sm"
            href={`https://${contactInfo.website}`}
          >
            <Icon name="bi:globe" />
            {contactInfo.website}
          </Button>
          <Button
            variant="ghost"
            size="sm"
            href={`https://${contactInfo.website}`}
          >
            <Icon name="bi:pin" />
            {contactInfo.location}
          </Button>
        </div>
      </div>
    </header>

    <!-- Main Column -->
    <main class="p-0 md:p-4 space-y-10">
      <!-- Professional Summary -->
      <section>
        <hr class="col-span-6 my-6" />
        <h2>Professional Summary</h2>
        <p class="text-lg leading-8">{summary}</p>
      </section>

      <!-- Professional Experience -->
      <section>
        <hr class="col-span-6 my-6" />
        <h2>Professional Experience</h2>
        <div class="space-y-6">
          {
            professionalExperience.map((experience) => (
              <div class=" p-6 rounded-lg shadow-sm hover:shadow-md transition-shadow duration-300">
                <div class="flex flex-col md:flex-row md:justify-between md:items-center mb-3 gap-2">
                  <h3 class="text-xl font-bold mb-3">{experience.role}</h3>
                  <div class="flex items-center gap-2">
                    <span class=" text-lg">{experience.company}</span>
                    <Badge variant="outline">{experience.period}</Badge>
                  </div>
                </div>

                {/* <p class=" mb-5">{experience.description}</p> */}

                <ul class="space-y-4 ps-4">
                  {experience.highlights.map((highlight) => (
                    <li set:html={highlight} />
                  ))}
                </ul>
              </div>
            ))
          }
        </div>
      </section>

      <!-- Key Projects -->
      <section>
        <hr class="col-span-6 my-6" />
        <h2>Key Projects</h2>

        <div class="grid grid-cols-1 gap-6">
          {
            keyProjects.map((project) => (
              <Card>
                <CardHeader>
                  <CardTitle>{project.name}</CardTitle>
                </CardHeader>
                <CardContent>
                  <p>{project.description}</p>
                  <ul class="list-disc list-inside mt-2">
                    {project.highlights.map((highlight) => (
                      <li class="font-medium">{highlight}</li>
                    ))}
                  </ul>
                </CardContent>
              </Card>
            ))
          }
        </div>
      </section>
    </main>

    <!-- Sidebar -->
    <aside class="space-y-8">
      <!-- Technical Expertise -->
      <section class="p-6 rounded-lg shadow-sm">
        <h2 class="text-xl font-bold mb-4 pb-2 border-b border-gray-200">
          Technical Expertise
        </h2>

        <div class="space-y-6">
          <div>
            <h3 class="font-semibold mb-3">Languages</h3>
            <div class="flex flex-wrap gap-2">
              {
                technicalExpertise.languages.map((lang, index) => (
                  <Badge variant={index >= 3 ? "ghost" : "default"}>
                    {lang}
                  </Badge>
                ))
              }
            </div>
          </div>

          <div>
            <h3 class="font-semibold mb-3">Frontend Technologies</h3>
            <div class="flex flex-wrap gap-2">
              {
                technicalExpertise.frontendTechnologies.map((tech, index) => (
                  <Badge variant={index >= 4 ? "ghost" : "default"}>
                    {tech}
                  </Badge>
                ))
              }
            </div>
          </div>

          <div>
            <h3 class="font-semibold mb-3">Backend Technologies</h3>
            <div class="flex flex-wrap gap-2">
              {
                technicalExpertise.backendTechnologies.map((tech, index) => (
                  <Badge variant={index >= 5 ? "ghost" : "default"}>
                    {tech}
                  </Badge>
                ))
              }
            </div>
          </div>

          <div>
            <h3 class="font-semibold mb-3">Tools</h3>
            <div class="flex flex-wrap gap-2">
              {
                technicalExpertise.tools.map((tool, index) => (
                  <Badge variant={index >= 5 ? "ghost" : "default"}>
                    {tool}
                  </Badge>
                ))
              }
            </div>
          </div>

          <div>
            <h3 class="font-semibold mb-3">Design Software</h3>
            <div class="flex flex-wrap gap-2">
              {
                technicalExpertise.designSoftware.map((software, index) => (
                  <Badge variant={index >= 1 ? "ghost" : "default"}>
                    {software}
                  </Badge>
                ))
              }
            </div>
          </div>
        </div>
      </section>

      <!-- Additional Competencies -->
      <section class="p-6 rounded-lg shadow-sm">
        <h2 class="text-xl font-bold mb-4 pb-2 border-b border-gray-200">
          Additional Competencies
        </h2>

        <div class="space-y-4">
          {
            additionalCompetencies.map((competency) => (
              <div class="flex justify-between items-center">
                <span class="font-medium">{competency}</span>
              </div>
            ))
          }
        </div>
      </section>

      <!-- Education -->
      <section class="p-6 rounded-lg shadow-sm">
        <h2 class="text-xl font-bold mb-4 pb-2 border-b border-gray-200">
          Education
        </h2>

        <div class="space-y-4">
          {
            education.map((edu) => (
              <div class="relative pl-6 before:content-[''] before:absolute before:left-0 before:top-2 before:w-3 before:h-3 before:bg-blue-600 before:rounded-full before:z-10 after:content-[''] after:absolute after:left-1.5 after:top-2 after:h-full after:w-px after:bg-gray-300 after:-z-10">
                <h3 class="font-semibold">{edu.degree}</h3>
                <p class="">{edu.institution}</p>
                <p class="text-gray-500">({edu.year})</p>
                <ul class="list-disc list-inside mt-2">
                  {edu.highlights.map((highlight) => (
                    <li class="">{highlight}</li>
                  ))}
                </ul>
              </div>
            ))
          }
        </div>
      </section>

      <!-- Languages -->
      <section class="p-6 rounded-lg shadow-sm">
        <h2 class="text-xl font-bold mb-4 pb-2 border-b border-gray-200">
          Languages
        </h2>

        <div class="grid grid-cols-[auto,1fr] gap-x-4 gap-y-3 items-center">
          {
            languages.map((lang) => {
              // Directly use the proficiency value from the JSON data
              const proficiencyValue = parseInt(lang.proficiency, 10);
              const widthPercentage = `${proficiencyValue}%`;

              return (
                <>
                  {/* Column 1: Language Name */}
                  <span class="font-medium text-right">{lang.language}</span>

                  {/* Column 2: Progress Bar */}
                  <div
                    class="bg-gray-200 rounded-full h-2 overflow-hidden"
                    role="progressbar"
                    aria-valuenow={proficiencyValue}
                    aria-valuemin="0"
                    aria-valuemax="100"
                    aria-label={`${lang.language} proficiency: ${widthPercentage}`}
                    title={`${lang.language} proficiency: ${widthPercentage}`}
                  >
                    <div
                      class="bg-blue-600 h-2 rounded-full skill-bar-inner"
                      style={`width: ${widthPercentage};`}
                    />
                  </div>
                </>
              );
            })
          }
        </div>
      </section>

      <!-- Interests & Continuous Learning -->
      <section class="p-6 rounded-lg shadow-sm">
        <h2 class="text-xl font-bold mb-4 pb-2 border-b border-gray-200">
          Interests
        </h2>

        <div class="space-y-4">
          {
            interests.map((interest) => (
              <div class="flex justify-between items-center">
                <span class="font-medium">{interest}</span>
              </div>
            ))
          }
        </div>
      </section>
      <!-- <section>
        <h2 class="text-2xl font-bold mb-4 pb-2 border-b border-gray-200">
          Professional Philosophy
        </h2>

        <div class="bg-white p-6 rounded-lg shadow-sm">
          <p class="text-gray-700">{professionalPhilosophy}</p>
        </div>
      </section> -->
    </aside>

    <!-- QR Code Section -->
    <!-- <section id="resume__cta" class="justify-self-center">
      <div
        class="bg-white p-6 rounded-lg shadow-sm flex flex-col md:flex-row justify-between items-center gap-6"
      >
        <div>
          <img
            src="/img/placeholder.png"
            alt="QR Code to website"
            class="max-w-48 aspect-square object-cover"
          />
          <Button variant="outline">
            <i class="bi bi-download mr-2"></i>
            Download Resume
          </Button>
          <p class="text-gray-700 italic mb-2 not-print:hidden">
            References available upon request.
          </p>
        </div>
      </div>
    </section> -->

    <ContactCTA />
  </div>
</Layout>

<script>
  // Add animation and interactivity
  document.addEventListener("DOMContentLoaded", () => {
    // Skill bar animations
    const skillBars =
      document.querySelectorAll<HTMLElement>(".skill-bar-inner");
    skillBars.forEach((bar) => {
      const width = bar.getAttribute("data-width");
      setTimeout(() => {
        if (width) {
          bar.style.width = width;
        }
      }, 300);
    });

    // Dark mode toggle
    const themeToggleBtn = document.querySelector("button:has(.bi-moon-stars)");
    if (themeToggleBtn) {
      themeToggleBtn.addEventListener("click", () => {
        document.documentElement.classList.toggle("dark");
      });
    }

    // Download resume placeholder
    const downloadBtn = document.querySelector("button:has(.bi-download)");
    if (downloadBtn) {
      downloadBtn.addEventListener("click", () => {
        alert("Resume download functionality would be implemented here!");
      });
    }
  });
</script>

<style>
  /* default styles */
  h2 {
    font-size: var(--text-2xl);
    font-weight: var(--font-weight-bold);
    margin-bottom: 1rem;
    /* border-bottom: 1px solid var(--color-gray-200); */
  }

  .resume__container {
    grid-template-rows: auto auto auto;

    #resume__cta {
      /* grid-row: 2 / 3; */
    }

    @media (min-width: 1024px) {
      & > main {
        grid-column: 1 / span 4;
      }
      & > aside {
        grid-column: 5 / span 2;
        grid-row: 2 / -1;
      }
      #resume__cta {
        grid-column: 1 / span 4;
        grid-row: -2 / -1;
      }
    }
  }
</style>
