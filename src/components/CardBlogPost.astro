---
/**
 * Blog Post Card Component
 */

// import CardComponent from "./CardComponent.astro";
import FormattedDate from "./FormattedDate.astro";
import { Badge } from "@/components/starwind/badge";
import type { HTMLAttributes } from "astro/types";

export interface BlogPostCardProps extends HTMLAttributes<"div"> {
  /** Post title */
  title: string;
  /** Post description */
  description: string;
  /** Publication date */
  date: Date;
  /** Array of tags */
  tags: string[];
  /** Category */
  category: string;
  /** URL to the full blog post */
  url: string;
  /** Thumbnail image URL */
  thumbnail?: string;
  /** Thumbnail alt text */
  thumbnailAlt?: string;
  /** Maximum number of tags to display before showing +n */
  maxVisibleTags?: number;
  /** Width of the card */
  width?: string;
}

const {
  title,
  description,
  date,
  tags = [],
  category,
  url,
  // thumbnail = "/img/placeholder.png",
  // thumbnailAlt,
  maxVisibleTags = 4,
  // width = "w-full",
  ...restProps
} = Astro.props;

// Limit tags for display
const visibleTags = tags.slice(0, maxVisibleTags);

import {
  Card,
  CardContent,
  CardDescription,
  CardFooter,
  CardHeader,
  CardTitle,
} from "@/components/starwind/card";
---

<Card class="card hover:border-primary/50 transition-colors">
  <CardHeader class="pb-4">
    <FormattedDate date={date} />
    <CardTitle class="text-balance">{title}</CardTitle>
  </CardHeader>
  <CardContent class="pb-1">
    <CardDescription class="hidden md:block lg:max-w-2xl text-balance"
      >{description}</CardDescription
    >
  </CardContent>
  <CardFooter class="md:justify-end pb-4">
    <div class="flex flex-wrap gap-1 stretched-link--above">
      {
        visibleTags.map((tag) => (
          <Badge variant="outline" href={`/blog/tag/${tag}`}>
            #{tag}
          </Badge>
        ))
      }
    </div>
  </CardFooter>

  <!-- Clean stretched link with no content -->
  <a href={url} class="stretched-link" aria-label={`Read more about ${title}`}
  ></a>
</Card>
