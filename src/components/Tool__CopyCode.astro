---
// 250630 - created for landing-brand.astro

interface Props {
  code: string;
  title?: string;
  language?: string;
}

const { code, title, language = "html" } = Astro.props;
---

<div class="copy-code-container">
  {
    title && (
      <div class="copy-code-header">
        <span class="copy-code-title">{title}</span>
        <button class="copy--" type="button" data-copy-text={code}>
          <svg
            width="16"
            height="16"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <rect width="14" height="14" x="8" y="8" rx="2" ry="2" />
            <path d="m4 16c-1.1 0-2-.9-2-2v-10c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2" />
          </svg>
          <span class="copy-text">Copy</span>
        </button>
      </div>
    )
  }

  <div class="copy-code-content">
    <pre
      class="copy-code-pre"><code class={`language-${language}`}>{code}</code></pre>
    {
      !title && (
        <button
          class="copy-- copy---overlay"
          type="button"
          data-copy-text={code}
        >
          <svg
            width="16"
            height="16"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <rect width="14" height="14" x="8" y="8" rx="2" ry="2" />
            <path d="m4 16c-1.1 0-2-.9-2v-10c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2" />
          </svg>
        </button>
      )
    }
  </div>
</div>

<script>
  import "../util/util--copy_clipboard.js";
</script>

<style>
  .copy-code-container {
    border: 1px solid #e2e8f0;
    border-radius: 8px;
    background: #f8fafc;
    margin: 1rem 0;
    overflow: hidden;
  }

  .copy-code-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.75rem 1rem;
    background: #f1f5f9;
    border-bottom: 1px solid #e2e8f0;
  }

  .copy-code-title {
    font-size: 0.875rem;
    font-weight: 600;
    color: #374151;
  }

  .copy-code-content {
    position: relative;
  }

  .copy-code-pre {
    margin: 0;
    padding: 1rem;
    overflow-x: auto;
    background: transparent;
    font-family: "Monaco", "Menlo", "Ubuntu Mono", monospace;
    font-size: 0.875rem;
    line-height: 1.5;
    white-space: pre-wrap;
    word-break: break-word;
  }

  .copy-code-pre code {
    color: #374151;
    background: transparent;
    padding: 0;
    border-radius: 0;
    font-size: inherit;
    word-break: break-word;
    white-space: pre-wrap;
  }

  .copy-- {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 0.75rem;
    background: #ffffff;
    border: 1px solid #d1d5db;
    border-radius: 6px;
    color: #374151;
    font-size: 0.875rem;
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .copy--:hover {
    background: #f9fafb;
    border-color: #9ca3af;
  }

  .copy--:active {
    transform: scale(0.98);
  }

  .copy---overlay {
    position: absolute;
    top: 0.75rem;
    right: 0.75rem;
    padding: 0.5rem;
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(4px);
  }

  .copy---overlay .copy-text {
    display: none;
  }

  .copy--.copied {
    background: #10b981;
    border-color: #10b981;
    color: white;
  }

  /* Dark mode support */
  @media (prefers-color-scheme: dark) {
    .copy-code-container {
      background: #1f2937;
      border-color: #374151;
    }

    .copy-code-header {
      background: #374151;
      border-bottom-color: #4b5563;
    }

    .copy-code-title {
      color: #f9fafb;
    }

    .copy-code-pre code {
      color: #f9fafb;
    }

    .copy-- {
      background: #374151;
      border-color: #4b5563;
      color: #f9fafb;
    }

    .copy--:hover {
      background: #4b5563;
      border-color: #6b7280;
    }

    .copy---overlay {
      background: rgba(55, 65, 81, 0.9);
    }
  }
</style>
